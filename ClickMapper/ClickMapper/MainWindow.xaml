<Window x:Class="ClickMapper.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:ClickMapper.Controls"
        Title="ClickMapper"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        WindowState="Normal"
        ShowInTaskbar="True"
        ResizeMode="NoResize"
        Loaded="Window_Loaded">
    
    <Grid x:Name="MainGrid">
        <!-- Canvas fÃ¼r die Pucks -->
        <Canvas x:Name="PuckCanvas" 
                Background="Transparent"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"/>
        
        <!-- Control Panel in der oberen rechten Ecke -->
        <Border x:Name="ControlPanel"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="10"
                Padding="15"
                CornerRadius="12"
                Background="#E0303030"
                BorderBrush="#FF505050"
                BorderThickness="2">
            <Border.Effect>
                <DropShadowEffect BlurRadius="15" ShadowDepth="3" Opacity="0.5"/>
            </Border.Effect>
            <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                <!-- Titel -->
                <TextBlock Text="ClickMapper" 
                           FontSize="18" 
                           FontWeight="Bold" 
                           Foreground="#FF2196F3"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,10"/>
                
                <!-- Status Anzeige -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Modus: " Foreground="White" FontSize="12"/>
                    <TextBlock x:Name="ModeLabel" 
                               Text="EDIT" 
                               FontWeight="Bold"
                               FontSize="12"
                               Foreground="#FF4CAF50"/>
                </StackPanel>
                
                <!-- Puck Anzahl -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Pucks: " Foreground="White" FontSize="12"/>
                    <TextBlock x:Name="PuckCountLabel" 
                               Text="0" 
                               FontWeight="Bold"
                               FontSize="12"
                               Foreground="#FFFFC107"/>
                </StackPanel>
                
                <!-- Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5,0,5">
                    <Button x:Name="ModeButton" 
                            Content="â–¶ PLAY" 
                            Style="{StaticResource ModeButtonStyle}"
                            Click="ModeButton_Click"
                            Margin="0,0,5,0"/>
                    
                    <Button x:Name="AddPuckButton" 
                            Content="+ Puck"
                            Width="80"
                            Height="40"
                            FontSize="12"
                            FontWeight="Bold"
                            Foreground="White"
                            Background="#CC2196F3"
                            BorderBrush="#FF1976D2"
                            BorderThickness="2"
                            Cursor="Hand"
                            Click="AddPuckButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" 
                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="8">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
                
                <!-- Speichern/Laden Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                    <Button x:Name="SaveButton" 
                            Content="ðŸ’¾ Speichern"
                            Width="90"
                            Height="28"
                            FontSize="10"
                            Foreground="White"
                            Background="#CC9C27B0"
                            BorderBrush="#FF7B1FA2"
                            BorderThickness="1"
                            Cursor="Hand"
                            Margin="0,0,5,0"
                            Click="SaveButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" 
                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="5">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button x:Name="LoadButton" 
                            Content="ðŸ“‚ Laden"
                            Width="90"
                            Height="28"
                            FontSize="10"
                            Foreground="White"
                            Background="#CC607D8B"
                            BorderBrush="#FF455A64"
                            BorderThickness="1"
                            Cursor="Hand"
                            Click="LoadButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" 
                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="5">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
                
                <!-- Hilfetext -->
                <TextBlock Text="Rechtsklick auf Puck = Taste zuweisen" 
                           Foreground="#FF888888" 
                           FontSize="10"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
                <TextBlock Text="Doppelklick auf Puck = LÃ¶schen" 
                           Foreground="#FF888888" 
                           FontSize="10"
                           HorizontalAlignment="Center"/>
                
                <!-- Exit Button -->
                <Button x:Name="ExitButton" 
                        Content="âœ• Beenden"
                        Width="100"
                        Height="30"
                        FontSize="11"
                        Foreground="White"
                        Background="#CCF44336"
                        BorderBrush="#FFD32F2F"
                        BorderThickness="2"
                        Cursor="Hand"
                        Margin="0,10,0,0"
                        Click="ExitButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    BorderBrush="{TemplateBinding BorderBrush}" 
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="6">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Border>
        
        <!-- Tastenzuweisungs-Dialog -->
        <Border x:Name="KeyAssignDialog"
                Visibility="Collapsed"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Padding="30"
                CornerRadius="15"
                Background="#F0202020"
                BorderBrush="#FF2196F3"
                BorderThickness="3">
            <Border.Effect>
                <DropShadowEffect BlurRadius="25" ShadowDepth="5" Opacity="0.7"/>
            </Border.Effect>
            <StackPanel>
                <TextBlock Text="Taste zuweisen" 
                           FontSize="20" 
                           FontWeight="Bold" 
                           Foreground="#FF2196F3"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,15"/>
                <TextBlock Text="DrÃ¼cke eine beliebige Taste..." 
                           FontSize="14" 
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,15"/>
                <Button Content="Abbrechen" 
                        Width="100"
                        Height="30"
                        Foreground="White"
                        Background="#CC757575"
                        BorderThickness="0"
                        Cursor="Hand"
                        Click="CancelKeyAssign_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</Window>
